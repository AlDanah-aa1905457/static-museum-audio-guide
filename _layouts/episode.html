<article class="post">

  <header class="post-header">
    <div class="post-title-episode">
      <div class="post-header-stop-id" style="background-image: url('{{ site.baseurl }}{{ site.headphones_icon_light }}');">
        <span>{{ page.stop_id }}</span>
      </div>

      <!-- Section Title with Language Toggle -->
      <h2 class="post-header-section-title" style="display: flex; justify-content: space-between; align-items: center;">
        <span id="section-title-en">{{ page.section_title_en }}</span>
        <span id="section-title-ar" style="display: none;">{{ page.section_title_ar }}</span>
        <button id="toggle-language" style="background: none; border: none; font-size: 25px; cursor: pointer; margin-left: auto;" title="Toggle Language">🌐</button>
      </h2>

      <!-- Main Title -->
      <h3 class="post-header-title">
        <span id="title-en">{{ page.title_en }}</span>
        <span id="title-ar" style="display: none;">{{ page.title_ar }}</span>
      </h3>
    </div>
  </header>

  <!-- Hero Images -->
  {% if page.hero_images != null %}
    <div class="slick-container post-hero-image-container">
      <div class="slick-post-hero-image">
        {% for hero in page.hero_images %}
          <div class="post-hero-image">    
            <img src="{{ site.baseurl }}{{ site.episode_hero_path }}{{ hero.path }}" alt="{{ hero.alt_text }}"/>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  <!-- Audio Section -->
  <div id="audio-en">
    <audio controls>
      <source src="{{ site.baseurl }}{{ site.audio_path }}{{ page.audio_file_en }}" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>

  <div id="audio-ar" style="display: none;">
    <audio controls>
      <source src="{{ site.baseurl }}{{ site.audio_path }}{{ page.audio_file_ar }}" type="audio/mpeg">
      المتصفح الخاص بك لا يدعم عنصر الصوت.
    </audio>
  </div>

  <div class="post-content">
    {{ content }}
  </div>

</article>

<script>
  document.getElementById('toggle-language').addEventListener('click', function() {
    // Section Titles
    const sectionTitleEn = document.getElementById('section-title-en');
    const sectionTitleAr = document.getElementById('section-title-ar');

    // Main Titles
    const titleEn = document.getElementById('title-en');
    const titleAr = document.getElementById('title-ar');

    // Audio Elements
    const audioEn = document.getElementById('audio-en');
    const audioAr = document.getElementById('audio-ar');

    // Check current state and toggle all elements
    const isEnglish = sectionTitleEn.style.display !== 'none';

    // Synchronize Titles and Audio
    sectionTitleEn.style.display = isEnglish ? 'none' : 'inline';
    sectionTitleAr.style.display = isEnglish ? 'inline' : 'none';

    titleEn.style.display = isEnglish ? 'none' : 'inline';
    titleAr.style.display = isEnglish ? 'inline' : 'none';

    audioEn.style.display = isEnglish ? 'none' : 'block';
    audioAr.style.display = isEnglish ? 'block' : 'none';
  });
</script>
